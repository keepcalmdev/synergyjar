var yz_load_attachments=!1;(function(t){t(document).ready(function(){if(jQuery().viewportChecker){if(t.yz_init_wall_posts_effect=function(){t(".yz_effect")[0]&&t(".yz_effect").viewportChecker({classToAdd:"animated",classToRemove:"invisible",removeClassAfterAnimation:!0,offset:"10%",callbackFunction:function(t,a){t.addClass(t.data("effect"))}},500)},t.yz_init_wall_posts_effect(),t("body").on("append","#activity-stream",function(a){t.yz_init_wall_posts_effect()}),t(".yz-column-content div.activity")[0]){var a=new MutationObserver(function(a){t.yz_init_wall_posts_effect()});a.observe(t(".yz-column-content div.activity")[0],{attributes:!1,childList:!0,subtree:!1,characterData:!1})}if(t("div.activity #activity-stream")[0]){a=new MutationObserver(function(a){t.yz_init_wall_posts_effect()});a.observe(t("div.activity #activity-stream")[0],{attributes:!1,childList:!0,subtree:!1,characterData:!1})}}if(t(document).on("click",".yz-trigger-who-modal",function(a){t(".yz-wall-modal-overlay").fadeIn(500,function(){t(this).find(".yz-modal-loader").fadeIn(400)}),a.preventDefault();var e=t(this).data("who-liked"),i={action:"yz_get_who_liked_post",post_id:e};jQuery.post(Youzer.ajax_url,i,function(a){var e=t("#yz-wall-modal").append(a);e.find(".yz-wall-modal").addClass("yz-wall-modal-show"),t(".yz-wall-modal-overlay").find(".yz-modal-loader").hide()})}),t(document).on("click",".yz-delete-post",function(a){var e=t(this),i=e.parents("div.activity ul li"),o=i.prop("class").match(/date-recorded-([0-9]+)/);e.addClass("loading"),jq.post(ajaxurl,{action:"delete_activity",cookie:bp_get_cookies(),id:t(this).parent().attr("data-activity-id"),_wpnonce:e.attr("data-nonce")},function(t){t[0]+t[1]==="-1"?(i.prepend(t.substr(2,t.length)),i.children("#message").hide().fadeIn(300)):(i.slideUp(300),o&&activity_last_recorded===o[1]&&(newest_activities="",activity_last_recorded=0))})}),t(document).on("click",".yz-show-tagged-users",function(a){a.preventDefault(),t(".yz-wall-modal-overlay").fadeIn(500,function(){t(this).find(".yz-modal-loader").fadeIn(400)});var e=t(this).closest("li.activity-item"),i={action:"yz_activity_tagged_users_modal",post_id:e.attr("id").substr(9,e.attr("id").length)};jQuery.post(Youzer.ajax_url,i,function(a){var e=t("#yz-wall-modal").append(a);e.find(".yz-wall-modal").addClass("yz-wall-modal-show"),t(".yz-wall-modal-overlay").find(".yz-modal-loader").hide()})}),t(document).keyup(function(a){t(".yz-wall-modal-show")[0]&&27===a.keyCode&&t(".yz-wall-modal-close").trigger("click")}),t(document).mouseup(function(a){t(".yz-wall-modal-overlay").is(a.target)&&t(".yz-wall-modal-show")[0]&&t(".yz-wall-modal-close").trigger("click")}),"on"==Youzer.activity_autoloader){var e=t(window);e.scroll(function(){var a=t("#activity-stream .load-more:visible");if(a.get(0)&&!a.data("yz-autoloaded")){var i=a.offset(),o=i.top-3e3;e.scrollTop()+e.height()>o&&(a.data("yz-autoloaded",1),a.find("a").trigger("click"))}})}t("#activity-stream").on("click",".friendship-button a",function(){t(this).parent().addClass("loading");var a=t(this).attr("id"),e=t(this).attr("href"),i=t(this);return a=a.split("-"),a=a[1],e=e.split("?_wpnonce="),e=e[1].split("&"),e=e[0],jq.post(ajaxurl,{action:"addremove_friend",cookie:bp_get_cookies(),fid:a,_wpnonce:e},function(a){var e=i.attr("rel"),o=i.parent();"add"===e?t(o).fadeOut(200,function(){o.removeClass("add_friend"),o.removeClass("loading"),o.addClass("pending_friend"),o.fadeIn(200).html(a)}):"remove"===e&&t(o).fadeOut(200,function(){o.removeClass("remove_friend"),o.removeClass("loading"),o.addClass("add"),o.fadeIn(200).html(a)})}),!1}),t("#activity-stream").on("click",".group-button a",function(a){t(this).hasClass("membership-requested")||t(this).addClass("yz-btn-loading");var e=t(this).parent().attr("id"),i=t(this).attr("href"),o=t(this);return e=e.split("-"),e=e[1],i=i.split("?_wpnonce="),i=i[1].split("&"),i=i[0],(!o.hasClass("leave-group")||!1!==confirm(BP_DTheme.leave_group_confirm))&&(jq.post(ajaxurl,{action:"joinleave_group",cookie:bp_get_cookies(),gid:e,_wpnonce:i},function(a){var e=o.parent();t(e).fadeOut(200,function(){e.fadeIn(200).html(a);var i=t("#groups-personal span"),s=1;o.hasClass("leave-group")?(e.hasClass("hidden")&&e.closest("li").slideUp(200),s=0):o.hasClass("request-membership")&&(s=!1),i.length&&!1!==s&&(s?i.text(1+(i.text()>>0)):i.text((i.text()>>0)-1))})}),!1)}),t("audio").on("play",function(){t("audio").not(this).each(function(t,a){a.pause()})}),t(document).on("click",".nice-select .option",function(a){t(this).parent().prev(".current").attr("data-value",t(this).attr("data-value"))}),t("#activity-stream").on("click","li.load-more",function(a){if(t(this).closest(".yz-activity-shortcode")[0]){a.stopImmediatePropagation();var e=t(this);e.addClass("loading");var i=t(this).parents(".yz-activity-shortcode");i.attr("data-page",parseInt(i.attr("data-page"))+1);var o=i.data();return o.page=i.attr("data-page"),t.post(ajaxurl,{data:o,action:"yz_activity_load_activities"},function(t){t.success&&(e.hide(),e.parents("ul.activity-list").append(t.data))},"json"),!1}}),t("body").append('<div id="yz-wall-modal"></div><div class="yz-wall-modal-overlay"><div class="yz-modal-loader"><i class="fas fa-spinner fa-spin"></i></div></div>'),t(document).on("click",".activity-item .yz-show-item-tools",function(a){var e=t(this),i=e.closest("li.activity-item"),o=e.find("i").attr("class");e.hasClass("loaded")?i.find(".yz-activity-tools").fadeToggle():e.hasClass("loading")||(e.addClass("loading"),e.find("i").attr("class","fas fa-spin fa-spinner"),t.ajax({type:"POST",url:ajaxurl,dataType:"json",data:{activity_id:i.attr("id").substr(9,i.attr("id").length),action:"yz_get_activity_tools"},success:function(a){e.find("i").attr("class",o),e.addClass("loaded"),e.removeClass("loading"),a.success&&i.prepend(t(a.data).fadeIn()),t(a.data).find(".yz-pin-tool").get(0)&&t("<script/>",{rel:"text/javascript",src:Youzer.assets+"js/yz-sticky-posts.min.js"}).appendTo("head"),t(a.data).find(".yz-bookmark-tool").get(0)&&t("<script/>",{rel:"text/javascript",src:Youzer.assets+"js/yz-bookmark-posts.min.js"}).appendTo("head")}}))}),t(".yz-activity-show-search-form").on("click",function(a){a.preventDefault();var e=t(this),i=e.closest("ul");i.find("#activity-filter-select .yz-dropdown-area").fadeOut(1,function(){e.closest("li").find(".yz-dropdown-area").fadeToggle(),e.closest("li").find("input").focus()})}),t(".yz-activity-show-filter").on("click",function(a){a.preventDefault();var e=t(this),i=e.closest("ul");i.find(".yz-activity-show-search .yz-dropdown-area").fadeOut(1,function(){e.closest("li").find(".yz-dropdown-area").fadeToggle()})}),t(".yz-show-activity-search").on("click",function(a){a.preventDefault();var e=t(this).parents("#youzer"),i=e.find(".yz-activity-show-search .yz-dropdown-area");e.find("#activity-filter-select .yz-dropdown-area, .activity-type-tabs").fadeOut(),i.fadeToggle(),i.find("input").focus()}),t(".yz-show-activity-filter").on("click",function(a){a.preventDefault();var e=t(this).parents("#youzer");e.find(".yz-activity-show-search .yz-dropdown-area, .activity-type-tabs").fadeOut(),e.find("#activity-filter-select .yz-dropdown-area").fadeToggle()}),t(".yz-show-activity-menu").on("click",function(a){a.preventDefault();var e=t(this).parents("#youzer");e.find("#subnav .yz-dropdown-area").fadeOut(),e.find(".activity-type-tabs").fadeToggle()})})})(jQuery);